// Override Bootstrap's global styles to prevent conflicts with main app
// Bootstrap CSS is global, so we need to protect the main app route

// Strategy: Only override Bootstrap utility classes that might conflict with Tailwind
// Bootstrap's global styles (box-sizing, etc.) are fine and match Tailwind
// We only need to protect against Bootstrap utility classes in the main app route

// Protect body when SnapFolio is NOT active
// Only reset CSS variables, don't override body styles (Tailwind handles those)
body:not(.snapfolio-body-active) {
  // Ensure no CSS variable leakage from SnapFolio
  --snapfolio-background-color: initial;
  --snapfolio-default-color: initial;
  --snapfolio-heading-color: initial;
  --snapfolio-accent-color: initial;
  --snapfolio-surface-color: initial;
  --snapfolio-contrast-color: initial;
}

// When SnapFolio route is active, Bootstrap and SnapFolio styles can apply
body.snapfolio-body-active {
  // Bootstrap styles apply here
  // SnapFolio CSS variables are scoped to .snapfolioBody
}

// Only override Bootstrap utility classes in main app route
// These are the only Bootstrap classes that might conflict with Tailwind
// Use higher specificity instead of !important
body:not(.snapfolio-body-active) .main-app-route {
  // CRITICAL: Ensure sections don't get background-color from Bootstrap
  // Use higher specificity selector instead of !important
  section {
    background-color: transparent;
  }

  // Override Bootstrap's .container class if accidentally used
  .container {
    max-width: revert;
    margin-left: revert;
    margin-right: revert;
    padding-left: revert;
    padding-right: revert;
  }

  // Override Bootstrap's .row class if accidentally used
  .row {
    margin-left: revert;
    margin-right: revert;
    display: revert;
    flex-wrap: revert;
  }

  // Override Bootstrap's .col-* classes if accidentally used
  [class*="col-"] {
    flex: revert;
    max-width: revert;
    padding-left: revert;
    padding-right: revert;
  }
}

// Additional protection: when Bootstrap is NOT loaded, ensure sections are transparent
// This handles the case where Bootstrap might have been loaded before but is now removed
// Use very high specificity to override Bootstrap's global section styles
body:not(.snapfolio-body-active) .main-app-route section,
body:not(.snapfolio-body-active) section {
  // Ensure sections don't get background-color from Bootstrap
  // Use transparent to allow parent background to show through
  background-color: transparent !important;
  // Reset any other Bootstrap section styles that might interfere
  color: inherit;
}

// Ensure Tailwind background utilities work correctly
// Tailwind's bg-* classes should override Bootstrap
body:not(.snapfolio-body-active) .main-app-route section[class*="bg-"],
body:not(.snapfolio-body-active) section[class*="bg-"] {
  // Allow Tailwind background utilities to work
  background-color: revert;
}

// Additional protection: ensure SnapFolio's global section styles don't leak
// SnapFolio's .snapfolio-section class is scoped, but just in case
body:not(.snapfolio-body-active) .snapfolio-section {
  // This shouldn't exist in main app, but protect against it
  display: none;
}

